# 🚀 SeelD AI-Powered CRM & Insurance Platform

<div dir="rtl">

## 🎯 סקירה כללית

**SeelD** היא פלטפורמה מתקדמת לניהול ביטוח ופיננסים המשלבת יכולות CRM מקצועיות עם בינה מלאכותית.

המערכת משלבת את היכולות של:
- **Surense** - ניהול סוכני ביטוח ותיק לקוחות מקצועי
- **SMS CRM** - מערכת CRM מתקדמת עם טלמרקטינג וניהול לידים
- **AI Agent (Claude)** - בינה מלאכותית שעובדת יחד עם האדם

---

## ✨ תכונות עיקריות

### 🤖 1. AI Agent - עוזר חכם
```
✓ צ'אטבוט מתקדם ללקוחות (תמיכה 24/7)
✓ עוזר אישי לסוכנים (המלצות, תובנות)
✓ Lead Scoring אוטומטי (דירוג לידים 0-100)
✓ ניתוח פוליסות וזיהוי פערי כיסוי
✓ יצירת משימות חכמות אוטומטית
✓ סיכום פגישות ומיילים
```

### 📊 2. CRM מתקדם
```
✓ ניהול לידים עם Kanban Board
✓ ניקוד לידים חכם (AI-powered)
✓ מערכת משימות ו-Follow Up
✓ מעקב פעילויות (שיחות, מיילים, SMS)
✓ קמפיינים שיווקיים
✓ תבניות להודעות ומסמכים
```

### 🏢 3. ניהול ביטוח ופנסיה
```
✓ ניהול תיק לקוחות מלא
✓ מעקב פוליסות ותאריכי חידוש
✓ ניהול עמלות אוטומטי
✓ דוחות מתקדמים
✓ מסמכים ואישורים דיגיטליים
✓ אינטגרציות עם חברות ביטוח
```

### 📈 4. אנליטיקס ודוחות
```
✓ דשבורד מנהלים בזמן אמת
✓ דוחות ביצועים לסוכנים
✓ ניתוח מגמות ותחזיות (AI)
✓ מעקב KPIs
✓ דוחות מותאמים אישית
```

---

## 🏗️ ארכיטקטורה טכנית

### Backend
- **Framework**: Next.js 14+ (App Router)
- **Database**: PostgreSQL
- **ORM**: Prisma
- **Authentication**: NextAuth.js
- **AI**: Anthropic Claude API

### Frontend
- **UI Framework**: React 19
- **Styling**: Tailwind CSS
- **Components**: Radix UI
- **Icons**: Lucide React
- **TypeScript**: מלא

### Infrastructure
- **Hosting**: Vercel
- **Database**: Vercel Postgres / Supabase
- **Storage**: Cloudflare R2
- **AI API**: Anthropic Claude

---

## 📁 מבנה הפרויקט

```
seeld-next/
├── app/
│   ├── (portals)/          # פורטלים מוגנים
│   │   ├── agent/          # פורטל סוכנים
│   │   │   ├── dashboard/  # דשבורד משודרג עם AI
│   │   │   ├── clients/    # ניהול לקוחות
│   │   │   ├── leads/      # ניהול לידים
│   │   │   └── tasks/      # ניהול משימות
│   │   └── client/         # פורטל לקוחות
│   │
│   ├── api/
│   │   ├── crm/           # CRM APIs
│   │   │   ├── tasks/     # ✅ משימות
│   │   │   ├── activities/# פעילויות
│   │   │   ├── campaigns/ # קמפיינים
│   │   │   └── leads/     # לידים
│   │   │
│   │   ├── ai/            # AI APIs
│   │   │   ├── chat/      # ✅ צ'אטבוט
│   │   │   ├── score-lead/# ✅ דירוג לידים
│   │   │   ├── analyze-policy/ # ניתוח פוליסות
│   │   │   └── recommendations/# המלצות
│   │   │
│   │   ├── agent/         # Agent APIs
│   │   └── client/        # Client APIs
│   │
│   └── globals.css
│
├── components/
│   ├── shared/            # קומפוננטות משותפות
│   ├── agent/             # קומפוננטות סוכן
│   └── client/            # קומפוננטות לקוח
│
├── prisma/
│   └── schema.prisma      # ✅ מודל נתונים מורחב
│
└── lib/
    ├── prisma.ts          # Prisma client
    └── utils.ts           # עזרים

```

---

## 🗄️ מודל נתונים

### מודלים חדשים שנוספו:

#### 📝 Task - משימות
```typescript
- כותרת ותיאור
- סוג (שיחה, מייל, פגישה, Follow Up, וכו')
- סטטוס (ממתין, בתהליך, הושלם)
- עדיפות (נמוכה, בינונית, גבוהה, דחוף)
- משויך למי (סוכן)
- קשור ללקוח/ליד
- תאריך יעד
- נוצר על ידי AI? (כן/לא + נימוק)
```

#### 📊 Activity - פעילויות
```typescript
- סוג פעילות (שיחה נכנסת/יוצאת, מייל, SMS, וכו')
- משתמש שביצע
- קשור ללקוח/ליד
- פרטי שיחה (משך, תוצאה, הקלטה)
- מעקב מיילים (נשלח, נפתח, נלחץ)
- מעקב SMS (נשלח, נמסר)
```

#### 📢 Campaign - קמפיינים
```typescript
- שם וסוג (Email, SMS, WhatsApp, Voice)
- תוכן והודעה
- קהל יעד
- תזמון
- סטטיסטיקות (נשלח, נפתח, נלחץ, המיר)
- תקציב ו-ROI
```

#### 🤖 AIInteraction - אינטראקציות AI
```typescript
- סוג (צ'אטבוט, ניתוח, המלצה, וכו')
- משתמש
- קלט ופלט
- מודל AI שהשתמש
- רמת ביטחון
- משוב (האם עזר?)
- ביצועים (זמן תגובה, tokens)
```

#### 🔗 Integration - אינטגרציות
```typescript
- שם (מסלקת פנסיה, חברת ביטוח, SMS, וכו')
- סוג
- סטטוס
- אישורים (API Key)
- סטטיסטיקות סנכרון
```

#### 🔔 Notification - התראות
```typescript
- משתמש
- כותרת והודעה
- סוג (משימה, פגישה, עמלה, וכו')
- עדיפות
- נקרא/לא נקרא
```

#### 📄 Template - תבניות
```typescript
- שם וסוג (Email, SMS, מסמך)
- תוכן
- משתנים ({{name}}, {{date}})
- ציבורי/פרטי
```

#### 📝 AuditLog - לוג ביקורת
```typescript
- מי עשה
- מה עשה (create, update, delete)
- על איזה משאב
- שינויים (JSON)
- IP ו-User Agent
```

---

## 🔌 API Endpoints

### CRM APIs

#### Tasks (משימות)
```
GET    /api/crm/tasks              # רשימת משימות
POST   /api/crm/tasks              # יצירת משימה
GET    /api/crm/tasks/:id          # פרטי משימה
PUT    /api/crm/tasks/:id          # עדכון משימה
DELETE /api/crm/tasks/:id          # מחיקת משימה
POST   /api/crm/tasks/:id/complete # סימון כהושלם
```

#### Activities (פעילויות)
```
GET    /api/crm/activities         # רשימת פעילויות
POST   /api/crm/activities         # רישום פעילות
```

#### Campaigns (קמפיינים)
```
GET    /api/crm/campaigns          # רשימת קמפיינים
POST   /api/crm/campaigns          # יצירת קמפיין
POST   /api/crm/campaigns/:id/send # שליחת קמפיין
```

### AI APIs

#### Chatbot
```
POST   /api/ai/chat                # שיחה עם AI
```
**Input:**
```json
{
  "message": "מה הפוליסות הפעילות שלי?",
  "conversationHistory": [...]
}
```
**Output:**
```json
{
  "response": "יש לך 3 פוליסות פעילות...",
  "suggestions": ["צפה בפוליסות", "תזמן פגישה"]
}
```

#### Lead Scoring
```
POST   /api/ai/score-lead          # דירוג ליד
```
**Input:**
```json
{
  "leadId": "clx..."
}
```
**Output:**
```json
{
  "score": 85,
  "reasoning": "ליד איכותי • הודעה מפורטת • כוונת רכישה ברורה",
  "recommendations": [
    "צור קשר בהקדם - נושא דחוף",
    "הליד מוכן לפגישה - תזמן במהירות"
  ]
}
```

#### Policy Analysis
```
POST   /api/ai/analyze-policy      # ניתוח פוליסה
```

#### Recommendations
```
POST   /api/ai/recommendations     # המלצות ללקוח
```

---

## 🎨 ממשק משתמש

### דשבורד סוכנים - עודכן! ✅

הדשבורד כולל עכשיו:

#### 📊 KPIs ראשיים
- סך לקוחות (פעילים/כולל)
- עמלות שנתיות וחודשיות
- ממוצע ערך פוליסה
- פגישות קרובות

#### ✅ המשימות שלי היום
- רשימת משימות להיום
- סינון לפי עדיפות (דחוף, גבוה, בינוני, נמוך)
- סימון משימות שנוצרו ע"י AI
- משימות באיחור מודגשות

#### 🔥 לידים חמים
- לידים בעלי ציון גבוה (70+)
- הצגת ציון הליד
- פרטי קשר מהירים
- כפתור "צור קשר" מהיר

#### 🤖 המלצות AI
- 3 המלצות מותאמות אישית ליום
- מבוססות על ניתוח פעילות
- מתעדכנות דינמית

#### 📅 פגישות קרובות
- רשימת פגישות מתוכננות
- פרטי לקוח ומיקום
- אפשרות לצפייה בלוח שנה

#### 💰 עמלות אחרונות
- מעקב עמלות שהתקבלו
- עמלות ממתינות
- סטטוס (התקבל, ממתין, באיחור)

#### ⚠️ התראות חכמות
- עמלות ממתינות
- משימות באיחור
- התראות מותאמות אישית

---

## 🚀 התקנה והפעלה

### דרישות מקדימות
```bash
- Node.js 18+
- PostgreSQL
- Anthropic API Key (לבינה מלאכותית)
```

### התקנה
```bash
# Clone הפרויקט
git clone [repository-url]

# התקנת תלויות
cd seeld-next
npm install

# הגדרת משתני סביבה
cp .env.example .env.local
```

### הגדרת משתני סביבה (.env.local)
```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/seeld"

# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="[generate-random-secret]"

# Anthropic AI
ANTHROPIC_API_KEY="sk-ant-api03-..."

# Optional: SMS Provider
TWILIO_ACCOUNT_SID=""
TWILIO_AUTH_TOKEN=""

# Optional: Email Provider
SENDGRID_API_KEY=""
```

### הפעלת מסד הנתונים
```bash
# Push schema to database
npx prisma db push

# Or run migrations (production)
npx prisma migrate dev --name init

# Generate Prisma Client
npx prisma generate

# (Optional) Seed database
npm run seed
```

### הפעלת השרת
```bash
# Development
npm run dev

# Production
npm run build
npm start
```

הפלטפורמה תהיה זמינה ב: `http://localhost:3000`

---

## 🔑 תפקידים והרשאות

### תפקידים במערכת
```
SUPER_ADMIN - מנהל על (כל ההרשאות)
ADMIN       - מנהל (ניהול ארגון וסוכנים)
MANAGER     - מנהל צוות (ניהול צוות והקצאת לידים)
AGENT       - סוכן (ניהול לקוחות ולידים שלו)
CLIENT      - לקוח (צפייה בתיק שלו)
```

### מטריצת הרשאות

| פעולה | ADMIN | MANAGER | AGENT | CLIENT |
|-------|-------|---------|-------|--------|
| ניהול משתמשים | ✅ | ❌ | ❌ | ❌ |
| צפייה בכל הלקוחות | ✅ | ✅ | ❌ | ❌ |
| ניהול לידים שלי | ✅ | ✅ | ✅ | ❌ |
| יצירת פוליסות | ✅ | ✅ | ✅ | ❌ |
| צפייה בפוליסות שלי | ✅ | ✅ | ✅ | ✅ |
| שימוש ב-AI Chatbot | ✅ | ✅ | ✅ | ✅ |
| ניהול אינטגרציות | ✅ | ❌ | ❌ | ❌ |
| דוחות ואנליטיקס | ✅ | ✅ | ✅ (שלו) | ❌ |

---

## 🤖 שימוש ב-AI Agent

### דוגמאות שימוש

#### לסוכן:
```
"מי הלקוחות שכדאי לי ליצור איתם קשר היום?"
→ AI מנתח את המשימות, הלידים והפעילויות ונותן המלצות

"תן לי סיכום של הפגישה עם דוד כהן"
→ AI מסכם את הפגישה ומציע פעולות המשך

"כתוב לי מייל המלצה ללקוח על ביטוח חיים"
→ AI יוצר טיוטת מייל מקצועית
```

#### ללקוח:
```
"מה הפוליסות הפעילות שלי?"
→ AI מציג את הפוליסות בצורה ברורה

"מתי אני צריך לחדש את הביטוח?"
→ AI מזכיר על תאריכי חידוש

"רוצה לתזמן פגישה עם הסוכן שלי"
→ AI מסייע בתיאום פגישה
```

### Lead Scoring - איך זה עובד?

המערכת מדרגת כל ליד בסקלה של 0-100 על בסיס:

1. **איכות פרטי קשר** (20 נק')
   - אימייל תקין: +10
   - טלפון תקין: +10

2. **איכות הודעה** (20 נק')
   - הודעה מפורטת: +10-15
   - מילות מפתח דחופות: +5
   - כוונת רכישה: +10

3. **מקור הליד** (15 נק')
   - מקור אמין (אתר, המלצה): +15
   - מקור טוב (גוגל, פייסבוק): +10

4. **סוג שירות** (10 נק')
   - שירותים פרמיום: +10

5. **עדכניות** (5 נק')
   - ליד טרי (<1 שעה): +5

6. **AI Enhancement** (±10 נק')
   - Claude AI מנתח ומתאים את הציון

**דירוג לידים:**
- 85-100: 🔥 חם מאוד - צור קשר מיידי
- 70-84: 🟠 חם - צור קשר בתוך 24 שעות
- 50-69: 🟡 פוטנציאלי - צור קשר בתוך 3 ימים
- 0-49: ⚪ קר - Follow Up רגיל

---

## 📊 מדדי הצלחה (KPIs)

המערכת עוקבת אחר:

### לסוכן:
- מספר לקוחות (כולל/פעילים)
- שיעור המרה (לידים → לקוחות)
- עמלות (שנתי/חודשי)
- זמן תגובה ללידים
- שיעור השלמת משימות

### למנהל:
- ביצועי צוות
- תחזית הכנסות
- ROI קמפיינים
- שימוש במערכת
- שביעות רצון לקוחות

---

## 🔒 אבטחה

### אמצעי אבטחה:
- ✅ אימות משתמשים (NextAuth)
- ✅ הצפנת סיסמאות (bcrypt)
- ✅ הגנה על API endpoints
- ✅ מערכת הרשאות מתקדמת
- ✅ Audit Log (לוג כל הפעולות)
- ✅ הגנה מפני SQL Injection (Prisma ORM)
- ✅ Rate Limiting על AI APIs
- ⏳ הצפנת API Keys (תכנון)
- ⏳ 2FA (תכנון)

---

## 📈 תוכנית פיתוח עתידית

### Phase 1 (הושלם) ✅
- [x] מודל נתונים מורחב
- [x] CRM Tasks API
- [x] AI Chatbot API
- [x] Lead Scoring API
- [x] דשבורד סוכנים משודרג

### Phase 2 (בתכנון)
- [ ] ניהול קמפיינים מלא
- [ ] אינטגרציה עם SMS (Twilio)
- [ ] אינטגרציה עם Email (SendGrid)
- [ ] חייגן אוטומטי
- [ ] OCR למסמכים

### Phase 3 (עתידי)
- [ ] אפליקציית Mobile (React Native)
- [ ] אינטגרציה עם מסלקת הפנסיה
- [ ] אינטגרציה עם הר הביטוח
- [ ] ניתוח קולי של שיחות
- [ ] דוחות מתקדמים עם AI

---

## 🆘 תמיכה

### בעיות נפוצות

**1. Prisma Schema Error**
```bash
# הפתרון:
npx prisma generate
npx prisma db push
```

**2. AI API לא עובד**
```bash
# בדוק שיש ANTHROPIC_API_KEY ב-.env.local
# המערכת תעבוד במצב דמו בלי API key
```

**3. Database Connection Failed**
```bash
# בדוק את DATABASE_URL ב-.env.local
# ודא ש-PostgreSQL רץ
```

### צור קשר
- 📧 Email: support@seeld.ai
- 🌐 Website: https://seeld.ai
- 📱 WhatsApp: [מספר]

---

## 📝 רישוי

© 2025 SeelD. כל הזכויות שמורות.

---

## 🙏 תודות

- **Anthropic** - על Claude AI המדהים
- **Vercel** - על הפלטפורמה המעולה
- **Prisma** - על ה-ORM הנהדר
- קהילת Next.js

---

## 🎉 סיכום

בנינו מערכת CRM מתקדמת לביטוח ופיננסים עם AI מובנה שמשלבת:

✅ ניהול לידים חכם עם דירוג אוטומטי
✅ מערכת משימות מתקדמת
✅ צ'אטבוט AI ללקוחות וסוכנים
✅ דשבורד מודרני ואינטואיטיבי
✅ מעקב פעילויות מלא
✅ ניהול קמפיינים
✅ אנליטיקס ודוחות
✅ מערכת הרשאות מתקדמת

**המערכת מוכנה לשימוש ומאפשרת לסוכנים לעבוד יותר חכם, לא יותר קשה!** 🚀

</div>
